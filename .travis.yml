dist: precise

language: python
python:
  - "3.6"
  
addons:
  mariadb: '10.4'

# command to install dependencies
install: "pip install -r requirements.txt"

env:
  global:
  - DATABASE_URI='mysql+pymysql://root:@localhost:3306/testdb'

before_script:
  - sudo mysql -e 'create database testdb;'

script:
  - nosetests

after_success:
  - codecov

# require the branch name to be master (note for PRs this is the base branch name)
notifications:
  slack:
    if: branch = master